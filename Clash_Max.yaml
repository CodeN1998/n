# ==========================================================
# ã€ŒOpenClash_Maxã€ç»ˆæç‰ˆ - 2026.01.23
# ==========================================================
# æ ¸å¿ƒåŠŸèƒ½ï¼š
# 1. è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½èŠ‚ç‚¹ (60ç§’é«˜é¢‘æ£€æµ‹)
# 2. Steam å•†åº—åŠæ¸¸æˆç‹¬ç«‹åˆ†ç»„ï¼Œé˜²è·³PING
# 3. Gemini/Google/Apple ç­–ç•¥ç»„å…¨èŠ‚ç‚¹æ‰©å®¹
# 4. æ–°å¢å—ææ´² (AQ) èŠ‚ç‚¹ç­›é€‰ä¸ç­–ç•¥
# 5. å½»åº•ä¿®å¤æ–­ç½‘ï¼šå…³é—­ IPv6ï¼Œä¸æ‹¦æˆª QUIC
# ==========================================================

# --- [ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç³»ç»Ÿè®¾ç½®] ---
port: 7890                    # HTTP ä»£ç†ç«¯å£
socks-port: 7891              # SOCKS5 ä»£ç†ç«¯å£
mixed-port: 7892              # æ··åˆç«¯å£
unified-delay: true           # å¼€å¯ç»Ÿä¸€å»¶è¿Ÿï¼šæ•°å€¼æ›´çœŸå®
tcp-concurrent: true          # TCP å¹¶å‘ï¼šç½‘é¡µæ‰“å¼€åŠ é€Ÿ
find-process-mode: strict     # ä¸¥æ ¼è¿›ç¨‹æ¨¡å¼
global-client-fingerprint: chrome # æ¨¡æ‹Ÿæµè§ˆå™¨æŒ‡çº¹
allow-lan: true               # å…è®¸å±€åŸŸç½‘å…±äº«
mode: rule                    # åˆ†æµæ¨¡å¼
ipv6: false                   # ã€ç¨³å®šå…³é”®ã€‘å¿…é¡»è®¾ä¸º falseï¼Œé˜²æ­¢æ–­ç½‘
udp: true                     # ã€æ¸¸æˆæ ¸å¿ƒã€‘è”æœºå¯¹å±€å¿…å¤‡

# --- [ç¬¬äºŒéƒ¨åˆ†ï¼šæµé‡å—…æ¢ - è§£å†³ç™»å½•æŠ¥é”™çš„å…³é”®] ---
sniffer:
  enable: true                # å¼€å¯å—…æ¢ï¼šè¯†åˆ«åŠ å¯†åŒ…åçš„çœŸå®åŸŸå
  force-dns-mapping: true     
  parse-pure-ip: true         
  override-destination: true  
  sniff:
    HTTP: {ports: [80, 8080-8880], override-destination: true}
    TLS: {ports: [443, 8443]}
    QUIC: {ports: [443, 8443]}
  skip-domain:                # å—…æ¢ç™½åå•ï¼šè§£å†³ç™»å½•æŠ¥é”™
    - "+.riotgames.com"       
    - "+.xd.com"              # å¿ƒåŠ¨å°é•‡
    - "+.levelinfinite.com"   # ç‹è€…å›½é™…æœ
    - "+.google.com"          
    - "+.steampowered.com"    

# --- [ç¬¬ä¸‰éƒ¨åˆ†ï¼šDNS è®¾ç½®] ---
dns:
  enable: true                
  enhanced-mode: fake-ip      # è™šæ‹Ÿ IP æ¨¡å¼
  fake-ip-range: 28.0.0.1/8   
  fake-ip-filter: ['*', '+.riotgames.com', '+.xd.com', '+.levelinfinite.com', '+.google.com', '+.steampowered.com']
  default-nameserver: [223.5.5.5, 119.29.29.29]
  nameserver: [https://223.5.5.5/dns-query, https://1.1.1.1/dns-qu  ery]

# --- [ç¬¬å››éƒ¨åˆ†ï¼šèŠ‚ç‚¹è®¢é˜…è·å–] ---
proxy-providers: 
  MyNodes:
    type: http
    url: 'æœºåœºé“¾æ¥'
    interval: 86400           
    path: './proxy_provider/nodes.yaml'
    health-check: {enable: true, url: 'http://connectivitycheck.gstatic.com/generate_204', interval: 60}

# --- [ç¬¬äº”éƒ¨åˆ†ï¼šæ­£åˆ™ç­›é€‰é”šç‚¹ - è‡ªåŠ¨åˆ†ç±»èŠ‚ç‚¹] ---
FilterHK: &FilterHK '(?i)é¦™æ¸¯|HK|Hong Kong'
FilterTW: &FilterTW '(?i)å°æ¹¾|TW|Taiwan'
FilterJP: &FilterJP '(?i)æ—¥æœ¬|JP|Japan'
FilterUS: &FilterUS '(?i)ç¾å›½|US|United States'
FilterSG: &FilterSG '(?i)æ–°åŠ å¡|SG|Singapore|ç‹®'
FilterCA: &FilterCA '(?i)åŠ æ‹¿å¤§|CA|Canada'
FilterKR: &FilterKR '(?i)éŸ©å›½|KR|Korea|éŸ©'
FilterGB: &FilterGB '(?i)è‹±å›½|UK|United Kingdom|è‹±'
FilterAQ: &FilterAQ '(?i)å—æ|AQ|Antarctica'

# æµ‹é€Ÿæ¨¡æ¿ï¼šinterval è®¾ä¸º 60 ç§’ï¼Œä¿è¯èŠ‚ç‚¹åˆ‡æ¢æœ€çµæ•
FallBack: &FallBack {type: fallback, interval: 60, lazy: true, url: 'http://connectivitycheck.gstatic.com/generate_204', include-all-providers: true}
RuleSet: &RuleSet {type: http, behavior: classical, interval: 86400, format: yaml, proxy: Proxy}

# --- [ç¬¬å…­éƒ¨åˆ†ï¼šç­–ç•¥ç»„ - å®ç°è‡ªåŠ¨å»¶è¿Ÿé€‰æ‹©] ---
proxy-groups: 
  - {name: Proxy, type: select, proxies: [è‡ªåŠ¨æµ‹è¯•, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¼ğŸ‡¸ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§èŠ‚ç‚¹, ğŸ‡¦ğŸ‡¶ å—ææ´²èŠ‚ç‚¹]}
  
  # ã€è‡ªåŠ¨æµ‹è¯•æ ¸å¿ƒç»„ã€‘æ¯åˆ†é’Ÿæ¢æµ‹ä¸€æ¬¡å»¶è¿Ÿï¼Œè‡ªåŠ¨é€‰æ‹©æœ€å¿«èŠ‚ç‚¹
  - {name: è‡ªåŠ¨æµ‹è¯•, type: url-test, proxies: [ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹], url: 'http://connectivitycheck.gstatic.com/generate_204', interval: 60, tolerance: 50}
  
  # ã€SteamGameã€‘ä¸“ç”¨åˆ†ç»„ï¼šè´Ÿè´£ Steam å•†åº—ä¸æ‰€æœ‰ç›¸å…³æ¸¸æˆæµé‡
  - {name: SteamGame, type: select, proxies: [DIRECT, è‡ªåŠ¨æµ‹è¯•, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¼ğŸ‡¸ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¦ğŸ‡¶ å—ææ´²èŠ‚ç‚¹]}
  
  # ã€Gameã€‘è´Ÿè´£å¿ƒåŠ¨å°é•‡ã€ç‹è€…è£è€€å›½é™…æœã€è‹±é›„è”ç›Ÿ (é¦–é€‰è‡ªåŠ¨æµ‹è¯•)
  - {name: Game, type: select, proxies: [è‡ªåŠ¨æµ‹è¯•, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¼ğŸ‡¸ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¦ğŸ‡¶ å—ææ´²èŠ‚ç‚¹]}
  
  # ã€Geminiã€‘AI æ‰©å®¹ç‰ˆï¼šè¦†ç›–æ‰€æœ‰æ”¯æŒ AI çš„èŠ‚ç‚¹
  - {name: Gemini, type: select, proxies: [ğŸ‡¼ğŸ‡¸ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, ğŸ‡¦ğŸ‡¶ å—ææ´²èŠ‚ç‚¹]}
  
  - {name: YouTube, type: select, proxies: [è‡ªåŠ¨æµ‹è¯•, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹]}
  - {name: TikTok, type: select, proxies: [ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹]}
  - {name: Telegram, type: select, proxies: [ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, Proxy]}
  - {name: Bilibili, type: select, proxies: [DIRECT, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¼ğŸ‡¸ å°æ¹¾èŠ‚ç‚¹]}

  # ç³»ç»Ÿçº§æœåŠ¡æ‰©å®¹
  - {name: Google, type: select, proxies: [è‡ªåŠ¨æµ‹è¯•, Proxy, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹]}
  - {name: Apple, type: select, proxies: [DIRECT, è‡ªåŠ¨æµ‹è¯•, Proxy, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹]}
  - {name: Microsoft, type: select, proxies: [DIRECT, è‡ªåŠ¨æµ‹è¯•, Proxy, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹]}

  # åŒºåŸŸå­ç»„ (å„åœ°åŒºèšåˆ)
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, <<: *FallBack, filter: *FilterHK}
  - {name: ğŸ‡¼ğŸ‡¸ å°æ¹¾èŠ‚ç‚¹, <<: *FallBack, filter: *FilterTW}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, <<: *FallBack, filter: *FilterJP}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, <<: *FallBack, filter: *FilterUS}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, <<: *FallBack, filter: *FilterSG}
  - {name: ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§èŠ‚ç‚¹, <<: *FallBack, filter: *FilterCA}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, <<: *FallBack, filter: *FilterKR}
  - {name: ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, <<: *FallBack, filter: *FilterGB}
  - {name: ğŸ‡¦ğŸ‡¶ å—ææ´²èŠ‚ç‚¹, <<: *FallBack, filter: *FilterAQ}

# --- [ç¬¬ä¸ƒéƒ¨åˆ†ï¼šè§„åˆ™é›†è®¢é˜…] ---
rule-providers:  
  Steam: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.yaml', path: './RuleSet/Steam.yaml'}
  AllGame: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.yaml', path: './RuleSet/AllGame.yaml'}
  Bilibili: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml', path: './RuleSet/Bilibili.yaml'}
  YouTube: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml', path: './RuleSet/YouTube.yaml'}
  Telegram: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml', path: './RuleSet/Telegram.yaml'}
  TikTok: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml', path: './RuleSet/TikTok.yaml'}
  Google: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml', path: './RuleSet/Google.yaml'}
  Apple: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple_Classical_No_Resolve.yaml', path: './RuleSet/Apple.yaml'}
  Microsoft: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft_No_Resolve.yaml', path: './RuleSet/Microsoft.yaml'}
  Gemini: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Gemini/Gemini.yaml', path: './RuleSet/Gemini.yaml'}
  China: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/ChinaMax/ChinaMax_Classical.yaml', path: './RuleSet/China.yaml'}

# --- [ç¬¬å…«éƒ¨åˆ†ï¼šæœ€ç»ˆåˆ†æµè§„åˆ™] ---
rules:
  # 1. å±€åŸŸç½‘ç™½åå•
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,127.0.0.0/8,DIRECT,no-resolve

  # 2. æ ¸å¿ƒæ¸¸æˆåŸŸååˆ†æµ (å¼ºåˆ¶æœ€é«˜ä¼˜å…ˆçº§)
  - DOMAIN-KEYWORD,riot,Game
  - DOMAIN-SUFFIX,riotgames.com,Game
  - DOMAIN-SUFFIX,xd.com,Game          # å¿ƒåŠ¨å°é•‡
  - DOMAIN-SUFFIX,taptap.io,Game       
  - DOMAIN-KEYWORD,honorofkings,Game   # ç‹è€…è£è€€
  - DOMAIN-SUFFIX,levelinfinite.com,Game 

  # 3. ä¸šåŠ¡è§„åˆ™é›†åŒ¹é…
  - RULE-SET,Steam,SteamGame
  - RULE-SET,AllGame,Game
  - RULE-SET,Gemini,Gemini
  - RULE-SET,Telegram,Telegram
  - RULE-SET,YouTube,YouTube
  - RULE-SET,TikTok,TikTok
  - RULE-SET,Bilibili,Bilibili
  - RULE-SET,Google,Google
  - RULE-SET,Apple,Apple
  - RULE-SET,Microsoft,Microsoft
  
  # 4. å…œåº•é€»è¾‘
  - RULE-SET,China,DIRECT
  - GEOIP,CN,DIRECT,no-resolve
  - MATCH,Proxy
