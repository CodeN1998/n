
# ==========================================================
# ã€ŒOpenClash_Maxã€å…¨æ³¨è§£ç»ˆæç‰ˆ - 2026.01.22
# ==========================================================
# é€‚ç”¨ï¼šOpenClash (å†…æ ¸å»ºè®®ä½¿ç”¨: Mihomo / Meta)
# åœ°åŒºï¼šé¦™æ¸¯ã€å°æ¹¾ã€æ—¥æœ¬ã€ç¾å›½ã€æ–°åŠ å¡ã€åŠ æ‹¿å¤§ã€éŸ©å›½ã€è‹±å›½ã€å—ææ´²
# ä¿®å¤ï¼šè‹±é›„è”ç›Ÿ SIPT éªŒè¯é”™è¯¯ã€Steam å•†åº—ã€Gemini AI
# ==========================================================

# --- [ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç³»ç»Ÿè®¾ç½®] ---
port: 7890                    # HTTP ä»£ç†ç«¯å£
socks-port: 7891              # SOCKS5 ä»£ç†ç«¯å£
mixed-port: 7892              # æ··åˆç«¯å£ï¼ˆè‡ªåŠ¨è¯†åˆ« HTTP/SOCKSï¼‰
unified-delay: true           # å¼€å¯ç»Ÿä¸€å»¶è¿Ÿï¼šæµ‹é€ŸåŒ…å«æ¡æ‰‹æ—¶é—´ï¼Œæ•°å€¼æ›´çœŸå®ï¼Œé¿å…è™šå‡ä½å»¶è¿Ÿ
tcp-concurrent: true          # TCP å¹¶å‘ï¼šåŒæ—¶å‘å¤šä¸ªæœåŠ¡å™¨å‘è¯·æ±‚ï¼Œè°å¿«ç”¨è°ï¼Œæå¤§æå‡ç½‘é¡µæ‰“å¼€é€Ÿåº¦
find-process-mode: strict     # ä¸¥æ ¼è¿›ç¨‹æ¨¡å¼ï¼šç²¾å‡†è¯†åˆ«æ˜¯å“ªä¸ª App åœ¨å‘è¯·æ±‚ï¼Œé˜²æ­¢æµé‡åˆ†æµé”™è¯¯
global-client-fingerprint: chrome # æµè§ˆå™¨æŒ‡çº¹ä¼ªè£…ï¼šå°†è¯·æ±‚ä¼ªè£…æˆ Chromeï¼Œå‡å°‘è¢«ç½‘ç«™å°é”çš„æ¦‚ç‡
allow-lan: true               # å…è®¸å±€åŸŸç½‘ï¼šè®©å®¶é‡Œçš„ç”µè§†ã€å…¶ä»–æ‰‹æœºä¹Ÿèƒ½å…±äº«ç§‘å­¦ä¸Šç½‘
mode: rule                    # åˆ†æµæ¨¡å¼ï¼šæŒ‰ç…§ä¸‹æ–¹ rules åˆ—è¡¨é‡Œçš„è§„åˆ™è¿›è¡Œåˆ†æµ
ipv6: true                    # å¼€å¯ IPv6 å…¼å®¹
udp: true                     # ã€æ ¸å¿ƒã€‘å¿…é¡»å¼€å¯ï¼šè‹±é›„è”ç›Ÿå¯¹å±€è”æœºã€ç”µæŠ¥é€šè¯ã€AI è¯­éŸ³å…¨é å®ƒ

# --- [ç¬¬äºŒéƒ¨åˆ†ï¼šæµé‡å—…æ¢ - è§£å†³ SIPT é”™è¯¯çš„å…³é”®] ---
sniffer:
  enable: true                # å¼€å¯å—…æ¢ï¼šClash ä¼šè§£æåŠ å¯†åŒ…é‡Œçš„çœŸå®åŸŸåï¼Œé˜²æ­¢åˆ†æµå¤±æ•ˆ
  force-dns-mapping: true     # å¼ºåˆ¶ DNS æ˜ å°„ï¼šé˜²æ­¢æœ¬åœ° DNS æ±¡æŸ“
  parse-pure-ip: true         # çº¯ IP è§£æï¼šå³ä½¿æ²¡æœ‰åŸŸåä¹Ÿå°è¯•è¯†åˆ«å…¶èƒŒåçš„æœåŠ¡
  override-destination: true  # ç›®æ ‡è¦†ç›–ï¼šè¯†åˆ«å‡ºçœŸåŸŸååï¼Œå¼ºè¡ŒæŒ‰ç…§åˆ†æµè§„åˆ™èµ°
  sniff:
    HTTP: {ports: [80, 8080-8880], override-destination: true}
    TLS: {ports: [443, 8443]}
    QUIC: {ports: [443, 8443]}
  skip-domain:                # ã€ä¸“é¡¹ä¿®å¤ã€‘åå•å†…çš„åŸŸåä¸è¿›è¡Œå—…æ¢ï¼Œé˜²æ­¢è¯ä¹¦å†²çªå¯¼è‡´ SIPT é”™è¯¯
    - "+.riotgames.com"       # Riot è´¦æˆ·ç™»å½•ç³»ç»Ÿï¼ˆSIPT ä¿®å¤æ ¸å¿ƒï¼‰
    - "+.pvp.net"             # è‹±é›„è”ç›Ÿæ ¸å¿ƒé€šä¿¡ï¼ˆSIPT ä¿®å¤æ ¸å¿ƒï¼‰
    - "+.riot.com"            # Riot å…¨çƒæœåŠ¡
    - "+.leagueoflegends.com" # æ¸¸æˆå®˜ç½‘
    - "+.vanguard.com"        # åä½œå¼Šç³»ç»Ÿ
    - Mijia Cloud             # ç±³å®¶æ™ºèƒ½å®¶å±…
    - "+.xd.com"              # å¿ƒåŠ¨ç½‘ç»œ
    - "+.google.com"          # é€‚é… Gemini è¯­éŸ³
    - "+.bilibili.com"        # Bç«™å¼¹å¹•åŠ é€Ÿ
    - "+.steampowered.com"    # Steam å•†åº—ç¨³å®šè¿æ¥

# --- [ç¬¬ä¸‰éƒ¨åˆ†ï¼šDNS è®¾ç½® - ç½‘ç»œçš„â€œå¯¼èˆªå‘˜â€] ---
dns:
  enable: true                # å¼€å¯å†…ç½® DNSï¼šç”± Clash æ¥ç®¡è§£æï¼Œå½»åº•è§£å†³ DNS æ±¡æŸ“
  enhanced-mode: fake-ip      # è™šæ‹Ÿ IP æ¨¡å¼ï¼šOpenClash æ ‡é…ï¼Œå“åº”é€Ÿåº¦æœ€å¿«
  fake-ip-range: 28.0.0.1/8   # åˆ†é…çš„è™šæ‹Ÿ IP æ®µ
  fake-ip-filter:             # ã€DNS ç™½åå•ã€‘è¿™äº›å¿…é¡»ç”¨çœŸå® IP è§£æï¼Œä¸¥ç¦è™šæ‹ŸåŒ–ï¼Œé˜²æ­¢æ¸¸æˆæŠ¥é”™
    - "*"                     # é»˜è®¤å…¨éƒ¨è™šæ‹ŸåŒ–
    - "+.riotgames.com"       # Riot å®¢æˆ·ç«¯å®‰å…¨æ ¡éªŒ
    - "+.pvp.net"
    - "+.google.com"          # Gemini ä¼šæ£€æŸ¥ä½ çš„è§£æåœ°å€
    - "+.microsoft.com"       # Windows æ›´æ–°åŠ é€Ÿ
    - "+.apple.com"           # è‹¹æœæœåŠ¡
    - "+.steampowered.com"    # Steam æ ¸å¿ƒæœåŠ¡
  default-nameserver: [223.5.5.5, 119.29.29.29] # å›½å†… DNS æŸ¥è¯¢åŸºç¡€
  nameserver: [https://223.5.5.5/dns-query, https://1.1.1.1/dns-query] # åŠ å¯† DNS æŸ¥è¯¢

# --- [ç¬¬å››éƒ¨åˆ†ï¼šèŠ‚ç‚¹è·å–] ---
proxy-providers: 
  MyNodes:
    type: http
    url: 'https://drfytjmjhggnrgergergergerg6555.saojc.xyz/api/v1/client/subscribe?token=6893414df1aadbfbdac2486557e8ff92'
    interval: 86400           # 24å°æ—¶è‡ªåŠ¨æ›´æ–°ä¸€æ¬¡èŠ‚ç‚¹åˆ—è¡¨
    path: './proxy_provider/nodes.yaml'
    health-check: {enable: true, url: 'http://connectivitycheck.gstatic.com/generate_204', interval: 60}

# --- [ç¬¬äº”éƒ¨åˆ†ï¼šæ­£åˆ™ç­›é€‰ - è‡ªåŠ¨ç»™èŠ‚ç‚¹åˆ†ç±»] ---
FilterHK: &FilterHK '(?i)é¦™æ¸¯|HK|Hong Kong'
FilterTW: &FilterTW '(?i)å°æ¹¾|TW|Taiwan'
FilterJP: &FilterJP '(?i)æ—¥æœ¬|JP|Japan'
FilterUS: &FilterUS '(?i)ç¾å›½|US|United States'
FilterSG: &FilterSG '(?i)æ–°åŠ å¡|SG|Singapore|ç‹®'
FilterCA: &FilterCA '(?i)åŠ æ‹¿å¤§|CA|Canada'
FilterKR: &FilterKR '(?i)éŸ©å›½|KR|Korea|éŸ©'
FilterGB: &FilterGB '(?i)è‹±å›½|UK|United Kingdom|è‹±'
FilterAQ: &FilterAQ '(?i)å—æ|AQ|Antarctica'

FallBack: &FallBack {type: fallback, interval: 300, lazy: true, url: 'http://connectivitycheck.gstatic.com/generate_204', include-all-providers: true}
RuleSet: &RuleSet {type: http, behavior: classical, interval: 86400, format: yaml, proxy: Proxy}

# --- [ç¬¬å…­éƒ¨åˆ†ï¼šç­–ç•¥ç»„ - ä½ çš„â€œé¥æ§å™¨â€] ---
proxy-groups: 
  # ã€ä¸»ä»£ç†ã€‘å…œåº•å‡ºå£
  - {name: Proxy, type: select, proxies: [è‡ªåŠ¨æµ‹è¯•, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¼ğŸ‡¸ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, ğŸ‡¦ğŸ‡¶ å—ææ´²èŠ‚ç‚¹]}
  
  # ã€è‡ªåŠ¨æµ‹è¯•ã€‘è‡ªåŠ¨é€‰æœ€å¿«çš„
  - {name: è‡ªåŠ¨æµ‹è¯•, type: url-test, proxies: [ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¼ğŸ‡¸ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹], url: 'http://connectivitycheck.gstatic.com/generate_204', interval: 300, tolerance: 50}

  # ã€Gameã€‘å…¨å¹³å°æ¸¸æˆï¼ˆä¿®å¤ SIPT åï¼Œé¦–é€‰æ—¥æœ¬ã€éŸ©å›½æˆ–é¦™æ¸¯ï¼Œå»¶è¿Ÿæœ€ä½ï¼‰
  - {name: Game, type: select, proxies: [ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¼ğŸ‡¸ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, Proxy]}

  # ã€Steamã€‘ç‹¬ç«‹åŠ é€Ÿï¼ˆä¸‹è½½æ—¶åˆ‡ DIRECTï¼Œè”æœºé€‰èŠ‚ç‚¹ï¼‰
  - {name: Steam, type: select, proxies: [DIRECT, Proxy, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹]}

  # ã€Geminiã€‘è°·æ­Œ AI ä¸“åŒºï¼ˆå·²è‡ªåŠ¨é¿å¼€é¦™æ¸¯ï¼‰
  - {name: Gemini, type: select, proxies: [ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¼ğŸ‡¸ å°æ¹¾èŠ‚ç‚¹]}

  # åº”ç”¨åˆ†æµç»„
  - {name: YouTube, type: select, proxies: [è‡ªåŠ¨æµ‹è¯•, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹]}
  - {name: TikTok, type: select, proxies: [ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹]}
  - {name: Telegram, type: select, proxies: [ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, Proxy]}
  - {name: Bilibili, type: select, proxies: [DIRECT, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¼ğŸ‡¸ å°æ¹¾èŠ‚ç‚¹]}
  - {name: Google, type: select, proxies: [Proxy, è‡ªåŠ¨æµ‹è¯•, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹]}
  - {name: Apple, type: select, proxies: [DIRECT, Proxy]}
  - {name: Microsoft, type: select, proxies: [DIRECT, Proxy]}

  # --- [åŒºåŸŸå­ç»„] ---
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, <<: *FallBack, filter: *FilterHK}
  - {name: ğŸ‡¼ğŸ‡¸ å°æ¹¾èŠ‚ç‚¹, <<: *FallBack, filter: *FilterTW}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, <<: *FallBack, filter: *FilterJP}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, <<: *FallBack, filter: *FilterUS}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, <<: *FallBack, filter: *FilterSG}
  - {name: ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§èŠ‚ç‚¹, <<: *FallBack, filter: *FilterCA}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, <<: *FallBack, filter: *FilterKR}
  - {name: ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, <<: *FallBack, filter: *FilterGB}
  - {name: ğŸ‡¦ğŸ‡¶ å—ææ´²èŠ‚ç‚¹, <<: *FallBack, filter: *FilterAQ}

# --- [ç¬¬ä¸ƒéƒ¨åˆ†ï¼šè§„åˆ™é›†è®¢é˜…] ---
rule-providers:  
  Steam: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.yaml', path: './RuleSet/Steam.yaml'}
  AllGame: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.yaml', path: './RuleSet/AllGame.yaml'}
  Bilibili: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml', path: './RuleSet/Bilibili.yaml'}
  YouTube: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml', path: './RuleSet/YouTube.yaml'}
  Telegram: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml', path: './RuleSet/Telegram.yaml'}
  TikTok: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml', path: './RuleSet/TikTok.yaml'}
  Google: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml', path: './RuleSet/Google.yaml'}
  Apple: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple_Classical_No_Resolve.yaml', path: './RuleSet/Apple.yaml'}
  Microsoft: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft_No_Resolve.yaml', path: './RuleSet/Microsoft.yaml'}
  Gemini: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Gemini/Gemini.yaml', path: './RuleSet/Gemini.yaml'}
  China: {<<: *RuleSet, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/ChinaMax/ChinaMax_Classical.yaml', path: './RuleSet/China.yaml'}

# --- [ç¬¬å…«éƒ¨åˆ†ï¼šæœ€ç»ˆåˆ†æµè§„åˆ™ - åŒ¹é…é€»è¾‘] ---
rules:
  # å¿…é¡»å°† Riot æ”¾åœ¨æœ€é¡¶ç«¯ï¼Œé˜²æ­¢è¢«é€šç”¨è§„åˆ™æ‹¦æˆª
  - DOMAIN-KEYWORD,riot,Game
  - DOMAIN-SUFFIX,riotgames.com,Game
  - DOMAIN-SUFFIX,pvp.net,Game
  - DOMAIN-SUFFIX,riot.com,Game
  
  - RULE-SET,Steam,Steam
  - RULE-SET,AllGame,Game
  - RULE-SET,Gemini,Gemini
  - RULE-SET,Telegram,Telegram
  - RULE-SET,YouTube,YouTube
  - RULE-SET,TikTok,TikTok
  - RULE-SET,Bilibili,Bilibili
  - RULE-SET,Google,Google
  - RULE-SET,Apple,Apple
  - RULE-SET,Microsoft,Microsoft
  - RULE-SET,China,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Proxy